---
import { absoluteUrl, canonicalOrigin, withBase } from "../../lib/site";

interface Props {
    faqItems?: { question: string; answer: string }[];
}

const { faqItems } = Astro.props;

const businessSchema = {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    name: "Green Commercial Cleaning Melbourne",
    image: [absoluteUrl("/images/og-image.jpg")], // Ensure this path is correct relative to public/ or absoluteUrl handles it

    // Use canonicalOrigin for ID to refer to the business identity consistently
    "@id": canonicalOrigin,

    // Use the actual URL (with base path if needed)
    url: absoluteUrl("/"),

    telephone: "+61422780703",
    priceRange: "$$",
    address: {
        "@type": "PostalAddress",
        streetAddress: "Melbourne CBD",
        addressLocality: "Melbourne",
        addressRegion: "VIC",
        postalCode: "3000",
        addressCountry: "AU",
    },
    geo: {
        "@type": "GeoCoordinates",
        latitude: -37.8136,
        longitude: 144.9631,
    },
    areaServed: [
        {
            "@type": "City",
            name: "Melbourne",
        },
        {
            "@type": "City",
            name: "South Melbourne",
        },
        {
            "@type": "City",
            name: "Richmond",
        },
        {
            "@type": "City",
            name: "Docklands",
        },
        {
            "@type": "City",
            name: "St Kilda",
        },
        {
            "@type": "City",
            name: "Port Melbourne",
        },
    ],
    openingHoursSpecification: {
        "@type": "OpeningHoursSpecification",
        dayOfWeek: [
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday",
            "Sunday",
        ],
        opens: "00:00",
        closes: "23:59",
    },
    sameAs: [
        "https://www.facebook.com/GreenCommercialCleaning",
        "https://www.instagram.com/greencommercialcleaning",
    ],
};

// FAQ Schema if items are passed
let faqSchema = null;
if (faqItems && faqItems.length > 0) {
    faqSchema = {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        mainEntity: faqItems.map((item) => ({
            "@type": "Question",
            name: item.question,
            acceptedAnswer: {
                "@type": "Answer",
                text: item.answer,
            },
        })),
    };
}
---

<script type="application/ld+json" set:html={JSON.stringify(businessSchema)} />
{
    faqSchema && (
        <script
            type="application/ld+json"
            set:html={JSON.stringify(faqSchema)}
        />
    )
}
